{
    "workflow": {
        "header": {
            "workflow_id": "AutoDock Vina docking",
            "description": "Runs docking using AutoDock Vina and a predefined receptor file.",
            "environment": {
                "export": []
            },
            "global_variables": {
                "smiles": "another_mol:Nc1ccc(cc1N)C(F)(F)F;failure:CXXC;aspirin:O=C(C)Oc1ccccc1C(=O)O",
                "receptor_path": "<FILL_PATH>/IcolosData/AutoDockVina/1UYD_fixed.pdbqt"
            }
        },
        "steps": [
            {
                "step_id": "rdkit_embedding",
                "type": "embedding",
                "settings": {
                    "arguments": {
                        "flags": [
                            "-epik"
                        ],
                        "parameters": {
                            "protonate": true,
                            "method": "rdkit"
                        }
                    },
                    "additional": {}
                },
                "input": {
                    "compounds": [
                        {
                            "source": "{smiles}",
                            "source_type": "string"
                        }
                    ]
                }
            },
            {
                "step_id": "ADV_receptor_1",
                "type": "vina_docking",
                "execution": {
                    "prefix_execution": "module load foss/2019a && ml AutoDock_Vina",
                    "parallelization": {
                        "cores": 4
                    },
                    "failure_policy": {
                        "n_tries": 3
                    }
                },
                "settings": {
                    "arguments": {
                        "flags": [],
                        "parameters": {}
                    },
                    "additional": {
                        "configuration": {
                            "seed": 42,
                            "receptor_path": "<FILL_PATH>/IcolosData/AutoDockVina/1UYD_fixed.pdbqt",
                            "number_poses": 2,
                            "search_space": {
                                "--center_x": 3.3,
                                "--center_y": 11.5,
                                "--center_z": 24.8,
                                "--size_x": 15,
                                "--size_y": 10,
                                "--size_z": 10
                            }
                        },
                        "grid_ids": [
                            "1UYD_1"
                        ]
                    }
                },
                "input": {
                    "compounds": [
                        {
                            "source": "rdkit_embedding",
                            "source_type": "step"
                        }
                    ]
                }
            },
            {
                "step_id": "ADV_receptor_2",
                "type": "vina_docking",
                "execution": {
                    "prefix_execution": "module load foss/2019a && ml AutoDock_Vina",
                    "parallelization": {
                        "cores": 4
                    },
                    "failure_policy": {
                        "n_tries": 3
                    }
                },
                "settings": {
                    "arguments": {
                        "flags": [],
                        "parameters": {}
                    },
                    "additional": {
                        "configuration": {
                            "seed": 42,
                            "receptor_path": "<FILL_PATH>/IcolosData/AutoDockVina/1UYD_fixed.pdbqt",
                            "number_poses": 2,
                            "search_space": {
                                "--center_x": 3.3,
                                "--center_y": 11.5,
                                "--center_z": 24.8,
                                "--size_x": 15,
                                "--size_y": 10,
                                "--size_z": 10
                            }
                        },
                        "grid_ids": [
                            "1UYD_2"
                        ]
                    }
                },
                "input": {
                    "compounds": [
                        {
                            "source": "rdkit_embedding",
                            "source_type": "step"
                        }
                    ]
                }
            },
            {
                "step_id": "data_manipulation",
                "type": "data_manipulation",
                "settings": {
                    "additional": {
                        "action": "no_action"
                    }
                },
                "input": {
                    "compounds": [
                        {
                            "source": "ADV_receptor_1",
                            "source_type": "step"
                        },
                        {
                            "source": "ADV_receptor_2",
                            "source_type": "step"
                        }
                    ],
                    "merge": {
                        "compounds": true,
                        "merge_compounds_by": "id",
                        "enumerations": true,
                        "merge_enumerations_by": "id"
                    }
                },
                "writeout": [
                    {
                        "compounds": {
                            "category": "conformers",
                            "selected_tags": [
                                "docking_score"
                            ],
                            "aggregation": {
                                "mode": "best_per_compound",
                                "key": "docking_score",
                                "highest_is_best": false
                            }
                        },
                        "destination": {
                            "resource": "../output/ensemble_docking_adv.json",
                            "type": "file",
                            "format": "JSON"
                        }
                    },
                    {
                        "compounds": {
                            "category": "conformers",
                            "selected_tags": [
                                "docking_score",
                                "grid_id"
                            ]
                        },
                        "destination": {
                            "resource": "../output/adv_ensemble_dock_results.csv",
                            "type": "file",
                            "format": "CSV"
                        }
                    }
                ]
            }
        ]
    }
}